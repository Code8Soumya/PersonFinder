# Find Person Application

## Description

Find Person is a full-stack application designed to help users find individuals by leveraging advanced photo matching technology. Users can upload photos, and the system will attempt to identify and match faces against a database of stored images.

## Features

-   **Photo Upload:** Users can upload images containing faces.
-   **Face Detection & Recognition:** Utilizes AI and machine learning models to detect faces in uploaded images and extract feature embeddings.
-   **Vector Search:** Employs a vector database (Pinecone) to efficiently search for similar faces based on their embeddings.
-   **User-Friendly Interface:** Built with EJS templating for a dynamic and interactive user experience.
-   **Secure:** Uses environment variables for sensitive configurations.

## Technologies Used

**Backend:**

-   Node.js
-   Express.js

**Frontend:**

-   EJS (Embedded JavaScript templates)
-   HTML, CSS, JavaScript
-   Tailwind CSS (for styling, inferred from devDependencies)

**Database:**

-   MySQL (for relational data)
-   Pinecone (for vector embeddings and similarity search)

**AI & Machine Learning:**

-   Google Cloud Vertex AI (`@google-cloud/aiplatform`, `@google-cloud/vertexai`)
-   Google Cloud Vision API (`@google-cloud/vision`)
-   face-api.js (for client-side or server-side face detection/recognition tasks)
-   Canvas (for image manipulation)

**File Handling:**

-   Multer (for handling `multipart/form-data`, primarily for file uploads)

**Development & Tooling:**

-   Nodemon (for automatic server restarts during development)
-   dotenv (for managing environment variables)
-   bcryptjs (likely for password hashing if user accounts are implemented)
-   express-session (for session management)

## Prerequisites

Before you begin, ensure you have the following installed and configured:

-   Node.js (v18.x or later recommended)
-   npm (Node Package Manager) or yarn
-   MySQL Server
-   A Pinecone account and API key
-   Google Cloud Platform account with Vertex AI and Vision API enabled, and appropriate credentials configured (e.g., `GOOGLE_APPLICATION_CREDENTIALS` environment variable).

## Installation and Setup

1.  **Clone the repository:**

    ```bash
    git clone <repository-url>
    cd find-person
    ```

2.  **Install dependencies:**

    ```bash
    npm install
    # or
    # yarn install
    ```

3.  **Set up environment variables:**
    Create a `.env` file in the root directory of the project by copying the example or creating a new one.
    Populate it with your specific configurations:

    ```env
    PORT=

    # Database Configuration
    DB_HOST=
    DB_PORT=
    DB_USER=
    DB_PASSWORD=
    DB_NAME=

    # Google Cloud Configuration
    GOOGLE_PROJECT_LOCATION=
    GOOGLE_PROJECT_ID=

    # Pinecone Configuration
    PINECONE_API_KEY=
    PINECONE_INDEX_NAME=
    ```

4.  **Set up the database:**

    -   Ensure your MySQL server is running.
    -   Create the database specified in your `.env` file (e.g., `find_person_db`).
    -   Run the database schema migrations/scripts if provided. The `database.sql` file in the root directory might contain the necessary SQL statements.

        ```sql
        -- Example: (Execute this in your MySQL client, pointing to your database)
        -- Contents of database.sql
        CREATE TABLE IF NOT EXISTS persons (
            id INT AUTO_INCREMENT PRIMARY KEY,
            name VARCHAR(255) NOT NULL,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );

        CREATE TABLE IF NOT EXISTS photos (
            id INT AUTO_INCREMENT PRIMARY KEY,
            person_id INT,
            image_path VARCHAR(255) NOT NULL,
            pinecone_vector_id VARCHAR(255),
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (person_id) REFERENCES persons(id) ON DELETE CASCADE
        );
        -- Add other tables as defined in database.sql
        ```

5.  **Set up Pinecone:**
    -   Ensure your Pinecone index is created with the correct dimensions for the embeddings generated by Google Vertex AI / face-api.js.

## Running the Application

1.  **Development Mode (with auto-reload):**

    ```bash
    npm run dev
    ```

2.  **Production Mode:**
    ```bash
    npm start
    ```
    The application will typically be accessible at `http://localhost:PORT` (e.g., `http://localhost:3000` if `PORT` is 3000).

## Project Structure

The project follows a standard Model-View-Controller (MVC) like pattern:

```
find-person/
├── .env                  # Environment variables (needs to be created)
├── .gitignore            # Specifies intentionally untracked files that Git should ignore
├── app.js                # Main application entry point
├── commands.txt          # Potentially useful commands or notes
├── database.sql          # SQL schema for the database
├── package-lock.json     # Records exact versions of dependencies
├── package.json          # Project metadata and dependencies
├── README.md             # Project documentation (this file)
├── config/               # Configuration files
│   └── database.js       # Database connection setup
├── controllers/          # Handles incoming requests and business logic
│   └── personController.js
├── middleware/           # Express middleware
│   └── uploadMiddleware.js # Middleware for file uploads (e.g., using Multer)
├── models/               # Data models and database interaction logic
│   ├── person.js
│   └── photo.js
├── public/               # Static assets (CSS, JavaScript, images)
│   ├── css/
│   │   └── style.css
│   └── scripts/
│       └── index.js
├── routes/               # Defines application routes
│   └── personRoutes.js
├── services/             # External service integrations
│   ├── googleEmbedding.js # Logic for Google AI Platform/Vertex AI embeddings
│   └── pineconeService.js # Logic for Pinecone database interactions
├── utils/                # Utility functions
│   └── path.js
└── views/                # EJS templates for the user interface
    ├── index.ejs         # Main page view
    └── layouts/          # Layout templates (header, footer, nav)
        ├── end.ejs
        ├── head.ejs
        └── nav.ejs
```
